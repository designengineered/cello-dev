---
import "@/styles/colors.css";
import { basics } from "@cv";
import treesBackground from "@/assets/trees.png"; // Import the trees.png image
// import { Image } from "astro:assets";
import thumbnailImage from "@/assets/cello_thumbnail.webp";
import "@fontsource/geist-mono/100.css";
import "@fontsource/geist-mono/200.css";
import "@fontsource/geist-mono/300.css";
import "@fontsource/geist-mono/400.css";
import "@fontsource/geist-mono/500.css";
import "@fontsource/geist-mono/600.css";
import "@fontsource/geist-mono/700.css";
import "@fontsource/geist-mono/800.css";
import "@fontsource/geist-mono/900.css";
import KeyboardManager from "@/components/KeyboardManager.astro";
interface Props {
    title: string;
}

const { title } = Astro.props;
const { image, summary, url } = basics;
---

<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content="Cello's Devlog" />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <link rel="preload" as="image" href={image} />
        <meta property="og:url" content={url} />
        <meta property="og:type" content="website" />
        <meta property="og:title" content={title} />
        <meta property="og:description" content={summary} />
        <!-- <meta property="og:image" content={thumbnailImage.src} /> -->

        <meta name="twitter:card" content="summary_large_image" />
        <meta property="twitter:domain" content={url.split("//")[1] ?? ""} />
        <meta property="twitter:url" content={url} />
        <meta name="twitter:title" content={title} />
        <meta name="twitter:description" content={summary} />
        <meta name="twitter:image" content="" />
        <title>{title}</title>
        <script is:inline>
            function setTheme(theme) {
                document.documentElement.setAttribute('data-theme', theme);
                localStorage.setItem('theme', theme);
            }
            
            function initTheme() {
                const savedTheme = localStorage.getItem('theme') || 'dark';
                setTheme(savedTheme);
            }
            
            // Run initTheme immediately
            initTheme();
        </script>
    </head>
    <body>
        <slot />
        <footer>
            <KeyboardManager />
        </footer>
    </body>
</html>
<style is:global define:vars={{treesBackgroundUrl: `url(${treesBackground.src})`}}>
    html {
        font-family: "GeistMono", monospace;
        font-weight: 400;
        background-image: 
            radial-gradient(
                circle at center,
                rgba(var(--color-background-rgb), 0.97) 0%,
                rgba(var(--color-background-rgb), 0.80) 100%
            ),
            var(--treesBackgroundUrl);
        background-size: cover;
        background-position: center;
        background-attachment: fixed;
        color: var(--color-text);
        letter-spacing: -0.025rem;
    }
    body {
        margin: 0;
        padding: 0;
        animation: fadeIn 0.5s ease-in-out 0.3s both;
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }
    footer {
        margin-top: auto;
    }
    @keyframes fadeIn {
        from { opacity: 0; }
        to { opacity: 1; }
    }
    figure {
        margin: 0;
        padding: 0;
    }
    a {
        text-decoration: none;
    }
    ul {
        list-style: none;
        margin: 0;
        padding: 0;
    }
    p,
    span {
        text-align: start;
        font-size: 0.9rem;
        line-height: 1.5;
        margin-block: 0.5rem;
        margin-inline: 0;
        text-wrap: pretty;
        padding-inline: 0.8rem;
    }
    *,
    *::before,
    *::after {
        box-sizing: border-box;
    }
    h1,
    h2,
    h3,
    h4,
    h5 {
        padding-left: 0.8rem;
        line-height: 1.5;
        margin-bottom: -0.5rem;
        margin-inline: 0;
    }
    h1 {
        color: var(--color-text);
        font-size: 2rem;
        font-style: bold;
        font-weight: 900;
        text-align: justify;
        line-height: 0.9;
        margin-top: 1rem;
    }
    h2 {
        color: var(--color-accent);
        font-size: 1.5rem;
        font-style: normal;
        font-weight: 600;
        text-align: start;
    }
    h4 {
        color: var(--color-accent);
        font-size: 1.05rem;
        font-style: normal;
        font-weight: 400;
    }
</style>
